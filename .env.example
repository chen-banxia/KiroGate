# KiroGate - 环境配置
# 将此文件复制为 .env 并填写你的配置

# ===========================================
# 必填项
# ===========================================

# 用于保护你的代理服务器的密码
# 这不是从其他地方获取的 token - 你自己设置一个！
# 连接网关时使用这个值作为 api_key
# 示例: "my-super-secret-password-123" 或任何安全的字符串
PROXY_API_KEY="my-super-secret-password-123"

# ===========================================
# 方式一: JSON 凭证文件（推荐）
# ===========================================

# JSON 凭证文件路径或远程 URL（替代 REFRESH_TOKEN）
# 本地文件: KIRO_CREDS_FILE="~/.aws/sso/cache/kiro-auth-token.json"
# 远程 URL:  KIRO_CREDS_FILE="https://example.com/kiro-credentials.json"
KIRO_CREDS_FILE="~/.aws/sso/cache/kiro-auth-token.json"

# ===========================================
# 方式二: Kiro Refresh Token
# ===========================================

# 从 Kiro IDE 流量中获取的 refresh token
# （替代 KIRO_CREDS_FILE）
# REFRESH_TOKEN="your_kiro_refresh_token_here"

# ===========================================
# 可选项
# ===========================================

# AWS CodeWhisperer profile ARN（通常自动检测）
# PROFILE_ARN="arn:aws:codewhisperer:us-east-1:..."

# AWS 区域（默认: us-east-1）
# KIRO_REGION="us-east-1"

# ===========================================
# 日志设置
# ===========================================

# 日志级别: TRACE, DEBUG, INFO, WARNING, ERROR, CRITICAL
# 默认: INFO（生产环境推荐）
# 设置为 DEBUG 以获取详细的调试信息
# LOG_LEVEL="INFO"

# ===========================================
# 超时设置
# ===========================================

# 等待模型返回第一个 token 的超时时间（秒）
# 如果模型在此时间内没有响应，请求将被取消并重试
# 对于 Opus 等慢模型，建议设置为 60-120 秒
# 默认: 60 秒
# FIRST_TOKEN_TIMEOUT="60"

# 首个 token 超时时的最大重试次数
# 用完所有尝试后，将返回 504 Gateway Timeout 错误
# 默认: 5 次
# FIRST_TOKEN_MAX_RETRIES="5"

# 流式读取超时（秒）- 读取流中每个 chunk 的最大等待时间
# 当模型生成响应时，如果某个 chunk 超过此时间未返回，将触发超时
# 对于 Opus 等慢模型，建议设置为 120-300 秒
# 默认: 120 秒
# STREAM_READ_TIMEOUT="120"

# 非流式请求超时（秒）- 等待完整响应的最大时间
# 对于复杂请求或 Opus 模型，建议设置为 300-600 秒
# 默认: 600 秒（10 分钟）
# NON_STREAM_TIMEOUT="600"

# ===========================================
# 调试（仅用于开发）
# ===========================================

# 调试日志模式:
# - off: 禁用（默认）
# - errors: 仅保存失败请求的日志 (4xx, 5xx) - 推荐用于排查问题
# - all: 保存所有请求的日志（每次请求覆盖）
# DEBUG_MODE=off

# 调试日志文件目录
# DEBUG_DIR="debug_logs"
